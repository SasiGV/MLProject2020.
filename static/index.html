<!doctype html>

<!-- Copied and adapted from Bootstrap homepage. -->

<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

    <title>Power Production Prediction!</title>
  </head>
  <body  style="background-color:#a3ccce;">
    
	
	<br />
	
	
    <div class="container" style="width:2000px;" align="center">
		<h1>Hello, You are here to find the power based on wind speed!</h1>
         <table class="table-dark text-dark" align="center" style="width:700px;">
			<tr>
				<td>
					<tr style="width:700px;">
						<img src="Wind_T1.jpg" alt="Wind Turbine" width="670" height="400">
					</tr>
				</td>
				
				<td>
					<tr class="table-active">
					  <td style="width:200;" >
						 <input class="form-control" id="input" type="number" placeholder="enter wind speed">
						 <small id="PowerInputHelpInline" class="text-muted">
							Must be an integer from 1 - 24
						</small>
					  </td>
					  <td style="text-align:center; width:200px;">
						 <button type="button" class="btn btn-success" id="power-button">Get Power Output</button>
					  </td>
					  <td style="width:200px;">
						 <input class="form-control" id="output" type="text" placeholder="power output" readonly>
					  </td>
					</tr>
				</td>
				<td>
				<tr style="width:700px;">
					<p class="text-left">
					The purpose of this application is to make wind turbine power output predictions. The power output in kilowatts (kW) is estimated for an inputted wind speed in metres/second (m/s).
					</p>

					<p class="text-left">
					The predicted estimate of power output is based on a Keras machine learning model that correlates a training dataset of known power output for measured wind speeds. The original dataset contained in the file "powerproduction.txt" contained 500 data points. After undertaking analyse and research into wind turbines and the dataset, 49 of these data points with 0kW power output were excluded and one duplicate data point was omitted prior to constructing the machine learning model. A plot of the training dataset points and the model prediction estimates is know in the plot below.
					</p>

					<p class="text-left">
					The power output prediction includes a 3m/s cut-in wind speed and a 24.5m/s cut-out wind speed limits to model real life wind turbine operation procedures for efficient power output and safety precautions during high winds.
					</p>

					<br />


					
				</tr>
				</td>
	
			</tr>
	
         </table>
      </div>		
		
	<!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <!-- Changed from slim to full jQuery. -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>

    <!-- Option 2: jQuery, Popper.js, and Bootstrap JS
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    -->


      <script>
	  
				// https://stackoverflow.com/questions/18042133/check-if-input-is-number-or-letter-javascript
			// Function to check if a number has been entered
			function is_number(input) {
				if(input === '')
					return false;
				let regex = new RegExp(/[^0-9]/, 'g');
				return (input.match(regex) === null);
			}
			// https://stackoverflow.com/questions/6454198/check-if-a-value-is-within-a-range-of-numbers
			// Function to check if x between min and max (returns T)
			function between(x, min, max) {
				return x >= min && x <= max;
			}
		
	            
			// When button is clicked, use the entered speed to estimate the power output
		   // Code adapted from https://stackoverflow.com/a/7685819. &
		   // https://www.sitepoint.com/ajaxjquery-getjson-simple-example
		   
			$("#power-button").click(function(e) {
				e.preventDefault();
				// Get the input
				var ip = document.getElementById("input").value;//by id
				// Check that it's an integer & within allowed range.
				if (is_number(ip) && between(ip, 1, 24)){
					$.getJSON("/api/model/"+encodeURI(ip), function(result) {
						$('#output').val(parseFloat(result.value).toFixed(2)); // float x.xx
						console.log(result) //checking
					});	
				} else {
					alert("Input must be a positive integer from 1 - 24.");	// error message	
				}
			});
			

			
      </script>
  </body>
</html>